{% extends "layout.html" %}
{% import '_macros.html' as macros %}
{% block title %}User Settings{% endblock %}
{% block content %}
<div class="row">
	<div class="col-lg-12">
		<h2 class="page-header">User Settings</h2>
	</div><!-- /.col-lg-12 -->
</div>
<div class="row">
	<div class="col-lg-8 col-md-12">
		<div class="panel panel-default">
			<div class="panel-heading">
				<i class="fa fa-user"></i> Basic Information
			</div>
			<div class="panel-body">
				<form class="form-horizontal" role="form" method="POST" action="{{ url_for('routes_user.settings') }}">
					{{ macros.render_field(form.name) }}
					{{ macros.render_field(form.email) }}
					{{ macros.render_field(form.teachername, "e.g. 'Mrs. Smith' - will be printed on exams") }}
					<div class="form-group"> 
						<div class="col-sm-offset-2 col-sm-10">
							<button type="submit" class="btn btn-default">Submit</button>
						</div>
					</div>
				</form>	
			</div>
			<div class="panel-footer">
			</div>
		</div>
	</div> <!-- col-md-6 -->
	<div class="col-lg-4 col-md-6">
		<div class="panel panel-info">
			<div class="panel-heading">
				Change your password.
			</div>
			<div class="panel-body">
				Some body info
			</div>
		</div>
	</div> <!-- col-md-6 -->
	<div class="col-lg-4 col-md-6">
		<div class="panel panel-info">
			<div class="panel-heading">
				Currently Open Sessions
			</div>
			<table class="table">
				<tr>
					<th>IP Address</th>
					<th>Last Active</th>
				</tr>
				{% for session in g.current_user.sessions %}
				<tr>
					<td>{{ session['ipaddress'] }}</td>
					<td>{{ session['updated_at'] }}</td>
				</tr> 
				{% endfor %}
			</table><!-- table -->
		</div>
	</div> <!-- col-md-6 Sessions -->
	<div class="col-lg-4 col-md-6">
		<div class="panel panel-info">
			<div class="panel-heading">
				Mobile Subscription
			</div>
			<div class="panel-body">
				Some body info
			</div>
		</div>
	</div> <!-- col-md-6 -->
	<div class="col-lg-4 col-md-6">
		<div class="panel panel-danger">
			<div class="panel-heading">
				Delete Account
			</div>
			<div class="panel-body">
				Warning: This will delete all user data.  Make sure that this is something you actually want to do.
			</div>
		</div>
	</div> <!-- col-md-6 -->
</div> <!-- row -->
{% endblock %}
